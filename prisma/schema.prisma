generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Property {
  idProperty      Int              @id @default(autoincrement()) @map("id_property")
  description     String?
  price           Int
  type            PropertyTypeEnum
  category        OperationEnum
  address         String?
  ubication       String?
  city            String?
  characteristics Characteristic[]
  images          image[]

  @@map("property")
}

model Admin {
  idAdmin       Int    @id @default(autoincrement()) @map("id_admin")
  adminEmail    String @map("admin_email") @db.VarChar(255)
  adminPassword String @map("admin_password") @db.VarChar(255)

  @@map("admin")
}

model Characteristic {
  idCharacteristic Int                         @id @default(autoincrement()) @map("id_characteristic")
  characteristic   String                      @db.VarChar(255)
  propertyId       Int                         @map("property_id")
  category         CharacteristicCategoryEnum? @default(otros)
  dataType         String                      @map("data_type") @db.VarChar(20)
  valueInteger     Int?                        @map("value_integer")
  valueText        String?                     @map("value_text")
  property         Property                    @relation(fields: [propertyId], references: [idProperty], onDelete: Cascade, map: "Characteristic_property_id_fkey")

  @@map("characteristic")
}

model image {
  idImage    Int       @id @default(autoincrement()) @map("id_image")
  url        String?
  idProperty Int?      @map("id_property")
  alt_text   String?
  property   Property? @relation(fields: [idProperty], references: [idProperty], onDelete: Cascade, map: "fk_image_propery")
}

enum PropertyTypeEnum {
  casa
  departamento
  campo
  local_comercial
  lote

  @@map("property_type_enum")
}

enum OperationEnum {
  alquilada
  alquiler
  venta
  vendida

  @@map("operation_enum")
}

enum CharacteristicCategoryEnum {
  superficie_total
  superficie_descubierta
  superficie_semicubierta
  superficie_cubierta
  ambientes
  dormitorios
  dormitorios_suite
  banos
  cocheras
  cobertura_cochera
  balcon_terraza
  expensas
  fecha_expensa
  agua
  cantidad_plantas
  tipo_piso
  estado_inmueble
  orientacion
  luminosidad
  disposicion
  antiguedad
  ubicacion_cuadra
  otros

  @@map("characteristic_category_enum")
}

enum property_status_enum {
  activa
  reservada
  vendida
  suspendida
}
